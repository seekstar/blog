---
title: Linux内核踩坑笔记
date: 2019-11-22 22:23:45
---

systemtap embedded C踩坑笔记戳这：
https://blog.csdn.net/qq_41961459/article/details/103093912

# task_struct的sibling字段
task_struct 的sibling字段指向的是一个侵入式双向循环链表的节点。这个链表头节点的pid是0。这个头节点并不是一个有效的task_struct，所以打印兄弟进程的时候要跳过这个头节点。（操作系统实验检查的时候被老师问为什么会打印出一个pid为0的进程，被问懵了）

pstree打印出来的东西，用{}括起来的是线程，如果用n*[{name}]的形式表示，就说明有n个线程。name表示主线程。这些线程被放到主线程的下一级，但是并不是它们所在的进程的子进程的兄弟进程，因为它们不是进程。（操作系统实验检查之后我改了代码，用pstree检查的时候发现好像少打印了进程，然后傻乎乎地去问老师然后受到了教育）
